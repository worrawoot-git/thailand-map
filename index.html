<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Thailand Real Population Map</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body { margin: 0; padding: 0; }
        #myDiv { width: 100vw; height: 100vh; }
    </style>
</head>
<body>

    <div id="myDiv"></div>

    <script>
        const geojsonUrl = 'https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json';

        // --- ส่วนที่แก้ไข: ใส่ข้อมูลประชากรจริง (ตัวอย่างปี 66) ---
        // คุณสามารถเพิ่มจังหวัดอื่นๆ ต่อท้ายได้ตามต้องการ
        const realData = {
            "Bangkok": 5494932,
            "Nakhon Ratchasima": 2630058,
            "Ubon Ratchathani": 1869840,
            "Khon Kaen": 1784641,
            "Chiang Mai": 1792474,
            "Buriram": 1573230,
            "Udon Thani": 1558528,
            "Nakhon Si Thammarat": 1545147,
            "Si Sa Ket": 1450333,
            "Surin": 1370557,
            "Songkhla": 1431536,
            "Chon Buri": 1618066
            // ... ถ้าจังหวัดไหนไม่มีในลิสต์นี้ จะแสดงเป็นสีเทา (0) ...
        };

        fetch(geojsonUrl)
            .then(response => response.json())
            .then(geojson => {
                
                const provinces = geojson.features.map(feature => feature.properties.name);

                // ดึงค่าจากตัวแปร realData มาใส่
                const populationData = provinces.map(name => {
                    // ถ้ามีชื่อในลิสต์ realData ให้ใช้ค่านั้น, ถ้าไม่มีให้เป็น 0
                    return realData[name] || 0; 
                });

                const data = [{
                    type: "choroplethmapbox",
                    geojson: geojson,
                    locations: provinces,
                    featureidkey: "properties.name",
                    z: populationData,
                    colorscale: "Viridis", // เปลี่ยนโทนสีให้ดูเป็นทางการขึ้น
                    zmin: 0,
                    zmax: 3000000, // ปรับสเกลสูงสุดที่ 3 ล้าน (เพื่อให้สีกระจายสวย)
                    marker: { opacity: 0.7 },
                    text: provinces,
                    hovertemplate: 
                        "<b>%{text}</b><br>" +
                        "ประชากร: %{z:,} คน<extra></extra>"
                }];

                const layout = {
                    title: { text: 'จำนวนประชากรรายจังหวัด (ข้อมูลจริงบางส่วน)', y: 0.95 },
                    mapbox: {
                        style: "carto-positron",
                        center: { lat: 13.736717, lon: 100.523186 },
                        zoom: 5
                    },
                    margin: { r: 0, t: 0, l: 0, b: 0 }
                };

                Plotly.newPlot('myDiv', data, layout, {responsive: true});
            })
            .catch(error => console.error('Error:', error));
    </script>

</body>
</html>
